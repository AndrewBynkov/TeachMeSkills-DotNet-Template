@model IEnumerable<TodoViewModel>

@{
    ViewData["Title"] = string.Format(PageTitleResource.StringFormat, PageTitleResource.TodoIndex, PageTitleResource.SiteName);
}

<div class="indent__margin-bottom">
    <a asp-controller="Todo" asp-action="Create">
        <input class="button button__link button__orange" type="button" value="+ Add New" />
    </a>
</div>

@if (Model.Any())
{
    foreach (var todoModel in Model)
    {
        var todoMainClass = !todoModel.IsActive
            ? $"todo todo__indent-bottom {todoModel.Priority}"
            : "todo todo__indent-bottom todo__task-completed";

        var todoText = !todoModel.IsActive
            ? $"todo__text {todoModel.Priority}"
            : "todo__text todo__text-completed";

        var todoAction = !todoModel.IsActive
            ? "Complete"
            : "Delete";

        var (todoImage, todoAlt) = !todoModel.IsActive
            ? ("in-progress.svg", "In progress")
            : ("completed.svg", "Completed");

        <div class="@todoMainClass" title="@todoModel.Description">
            <div class="todo__wrapper">
                <a class="@todoText" asp-controller="Todo" asp-action="Detail" asp-route-id="@todoModel.Id">
                    <span>@todoModel.Title</span>
                </a>
                <a class="todo__progress" asp-controller="Todo" asp-action="@todoAction" asp-route-id="@todoModel.Id">
                    <img src="/images/@todoImage" alt="@todoAlt">
                </a>
            </div>
        </div>
    }
}
else
{
    <h1>Todo list is empty</h1>
}

@section css {
    <link href="~/css/todo.css" rel="stylesheet" asp-append-version="true" />
}
